<ngx-spinner name="spinnerdashcategori">
</ngx-spinner>
<ng-template #content let-modal>
  <div class="modal-header">
      <h5 class="modal-title f-w-600" id="exampleModalLabel">Lista de productos</h5>
      <button type="button" class="close" aria-label="Close"
          (click)="modal.dismiss('Cross click')">
          <span aria-hidden="true">&times;</span>
      </button>
  </div>
  <div class="card">
    <div class="card-header">
        <label for="buscarcboleta">Buscar Voucher</label>
        <input type="text" name="buscarboleta" id="buscarboletaPana" (click)="busquedaPan()" class="form-control" placeholder="Ingrese el Código del voucher si se emitio en panaderia" [(ngModel)]="buscarpanaderia">
    </div>
    <div class="card-body">
          <table class="table table-bordered">
            <thead>
              <tr>
                <th scope="col">Código del voucher</th>
                <th scope="col">Precio</th>
                <th scope="col">Origen</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let item of consultarvoucher | busquedaprodutomarket:buscarpanaderia">
                <td *ngIf="item.market==true">{{item.cod_panaderia}}</td>
                <td *ngIf="item.market==true">{{item.pvalor}</td>
                <td *ngIf="item.market==true">{{item.market}}</td>
              </tr>       
              <button (click)="guardarPanaderia(buscarpanaderia)">Guardar</button> 
            </tbody>
          </table>
      </div>
    </div>
  <div class="modal-body">
      <form  >
        <div id="tablaventa" > 
        <table class="table table-bordered" >
          <thead>
            <tr>
              <th scope="col">CAN</th>
              <th scope="col">Nom</th>
              <th scope="col">Pres</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of items">
              <td>{{item.quantity}}</td>
              <td>{{item.category.cnombre}} {{item.pdescripcion}}</td>
              <td>{{item.pvalor }}</td>
            </tr>
          </tbody>
        </table>
        <div class="col text-center" >
            <h2 class="totalprice">Total: {{totalPrice}}</h2>
        </div>
        <div class="text-center bardcode " id="bardcode">
          <ngx-barcode [bc-value]="codigobarra" [bc-display-value]="true"></ngx-barcode>

        </div>
      </div>
        <!--guardar los registros generar un voucher-->
          <div class="modal-footer">
            <button (click)="guardarregistro()" class="btn btn-info">GUARDAR</button>
              <button type="button"  class="btn btn-primary" (click)="imprimirvoleta('tablaventa', 'totalprice','bardcode')" >IMPRIMIR</button>
              <button class="btn btn-secondary" type="button" data-dismiss="modal"
                      (click)="modal.dismiss('Cross click')">Cerrar</button>
          </div>
      </form>
  </div>
</ng-template>


<nav class="navbar navbar-light">
  <div class="shopping-cart-header">
     <button class="btn btn-primary btn-lg" (click)="open(content)">  <i class="fa fa-shopping-cart cart-icon" ></i><span class="badge"></span> Ver productos</button> 
      <div class="shopping-cart-total">
      </div>      
  </div> <!--end shopping-cart-header -->
</nav>
<hr>
   
<hr>
<div class="container-fluid">
  <div class="row">
    <div class="col-sm-12">
      <div class="card text-center">
        <div class="card-header">
          <h5>Modos de venta</h5> 
        </div>
          <ngb-tabset justify="fill">
            <ngb-tab>
              <ng-template ngbTabTitle><b>Ventas</b> por categorias</ng-template>
              <ng-template ngbTabContent>
                <div class="container">
                  <div class="card">
                    <div class="card-header">
                      <h3>Filtrar por categorías Panaderia</h3>
                    </div>
                    <div class="card-body">
                  <div class="row">
                  <div class="col-sm-6 col-md-4 col-lg-3" *ngFor="let item of (categorias  | paginate: {itemsPerPage:12, currentPage:p}); let i = index " >
                    <div class="form-check form-check-inline">
                      <input class="form-check-input" type="checkbox" id="checatecogira{{i}}" [value]="item.cnombre" (click)="boxClick(item, i)" >
                      <label class="form-check-label" for="inlineCheckbox1">{{item.cnombre}}</label>
                    </div>
                  </div>
                  </div>
                  </div>
                    <div class="row">
                      <div class="col">
                        <pagination-controls (pageChange)="p = $event " previousLabel="Atras" nextLabel="Siguiente"></pagination-controls>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>     
            </ngb-tab>
              <ngb-tab>
                <ng-template> <b>Venta</b> Por calculadora</ng-template>
                <ng-template ngbTabContent>
                  <div class="container">
                    <div class="row">
                        <div class="col-xs-12" id="titulo">
                            <h3 >Calculadora Básica</h3>
                        </div>
                    </div>
                </div>
                <div class="container">
                    <div class="row align-items-center">
                        <div class="col-xs-12 col-sm-6 col-md-3 fundo-mod margem borda">
                                
                            <div class="justify-content-center centro">
                                
                                <table class="table table-dark">
                                    <tr>
                                        
                                        <td colspan="4" ><div id="historico" onclick="mostrarHora();"></div></td>
                                    </tr>
                                    <tr>
                                        
                                        <td colspan="4"><input type="text" name="visor" id="visor" class="col-xs-12 col-sm-12 col-md-12"/></td>
                                    </tr>
                                    <tr>
                                        <td><input type="button" id="botao7" value="7" [(ngModel)]="n7" class="btn btn-secondary mesmo-tamanho" (click)="botao(n7);"/></td>
                                        <td><input type="button" id="botao8" value="8" [(ngModel)]="n8" class="btn btn-secondary mesmo-tamanho" (click)="botao(n8);"/></td>
                                        <td><input type="button" id="botao9" value="9" [(ngModel)]="n9" class="btn btn-secondary mesmo-tamanho" (click)="botao(n9);"/></td>
                                        <td><input type="button" id="botao/" value="/" [(ngModel)]="ndiv" class="btn btn-info mesmo-tamanho" (click)="btn_divide(ndiv);" /></td>
                                    </tr>
                                    <tr>
                                        <td><input type="button" id="botao4" value="4" [(ngModel)]="n4" class="btn btn-secondary mesmo-tamanho" (click)="botao(n4);"/></td>
                                        <td><input type="button" id="botao5" value="5" [(ngModel)]="n5" class="btn btn-secondary mesmo-tamanho" (click)="botao(n5);"/></td>
                                        <td><input type="button" id="botao6" value="6" [(ngModel)]="n6" class="btn btn-secondary mesmo-tamanho" (click)="botao(n6);"/></td>
                                        <td><input type="button" id="botao*" value="*" [(ngModel)]="npor" class="btn btn-info mesmo-tamanho" (click)="btn_multiplica(npor);"/></td>
                                    </tr>
                                    <tr>
                                        <td><input type="button" id="botao1" value="1" [(ngModel)]="n1" class="btn btn-secondary mesmo-tamanho" (click)="botao(n1);"/></td>
                                        <td><input type="button" id="botao2" value="2" [(ngModel)]="n2" class="btn btn-secondary mesmo-tamanho" (click)="botao(n2);"/></td>
                                        <td><input type="button" id="botao3" value="3" [(ngModel)]="n3" class="btn btn-secondary mesmo-tamanho" (click)="botao(n3);"/></td>
                                        <td><input type="button" id="botao-" value="-" [(ngModel)]="nrest" class="btn btn-info mesmo-tamanho" (click)="btn_subtrai(nrest);" /></td>
                                    </tr>
                                    <tr>
                                        <td><input type="button" id="botao0" value="0" [(ngModel)]="n0" class="btn btn-secondary mesmo-tamanho" (click)="botao(n0);"/></td>
                                        <td><input type="button" id="botao=" value="=" [(ngModel)]="nigual" class="btn btn-info mesmo-tamanho" (click)="btn_igual(nigual);"/></td>
                                        <td><input type="button" id="botaoC" value="C" [(ngModel)]="nC" class="btn btn-danger mesmo-tamanho" (click)="reset(nC);"/></td>
                                        <td><input type="button" id="soma" value="+" [(ngModel)]="nmas" class="btn btn-info mesmo-tamanho" (click)="btn_soma(nmas);"/></td>
                                    </tr>
                                </table> 
                            </div>
                            <div style="border: solid;">
                              <button class="form-control btn btn-warning" (click)="guardarnumero(Cnumero)">Guardar</button>
                            </div>
            
                        </div>
                    </div>
                </div>
                </ng-template>
              </ngb-tab>         
            
          <ngb-tab>
            <ng-template ngbTabTitle> <b>Venta</b> Busqueda del codigo</ng-template>
            <ng-template ngbTabContent>
              <div class="container">
                <div class="col">
                <span class="main-color-text" style="  text-align: center;"><h2></h2></span>
                <div class="row" style="margin-bottom: 40px;">
                  <input type="text" class="form-control form-control-lg" name="fproducto" id="fproducto" [(ngModel)]="Fproducto" placeholder="Busar por el código del producto">
                </div>
                </div>
                </div>
                <div class="container" >
                <div class="row" style=" padding-bottom: 20px;" >
                    <div class="col-sm-6 col-md-4 col-lg-3" *ngFor="let item of producto | minimarketfilter:Fproducto"  >
                        <div class="card" style="width: 18rem; ">
                            <img class="card-img-top" src="../../../../../assets/images/user.png" alt="Card image cap">
                            <div class="card-body">
                              <h5 class="card-title">{{item.category.cnombre}} {{item.brand.bnombre}} {{item.pdescripcion}}</h5>
                              <p class="font-weight-bold">Precio</p> <h2>${{item.pvalor + item.piva}}</h2>
                              <button type="button" (click)="mandarcarro_primeraforma(item)" class="btn btn-primary">Go somewhere </button>
                            </div>
                          </div>
                          
                    </div>
                </div>
                </div>
            </ng-template>
          </ngb-tab>
       
          </ngb-tabset>
      </div>
    </div>
    
  </div>
</div>
